<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8" />
  <style>
    body {
      font-family: Inter, sans-serif;
      padding: 24px;
      margin: 0;
      background-color: #fff;
      color: #333;
      font-size: 12px;
      line-height: 1.4;
    }

    .section-title {
      font-size: 14px;
      font-weight: 600;
      margin-bottom: 16px;
    }

    .onboarding-msg {
      background-color: #F5F5F5;
      border-left: 4px solid #18A0FB;
      padding: 12px;
      margin-bottom: 16px;
      border-radius: 4px;
      font-size: 12px;
      color: #444;
    }

    .button-primary {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      padding: 10px 14px;
      background-color: #18A0FB;
      border: none;
      border-radius: 6px;
      color: white;
      font-weight: 500;
      cursor: pointer;
      font-size: 12px;
      transition: background-color 0.2s ease-in-out;
      margin-right: 8px;
    }

    .button-primary:disabled {
      background-color: #A0A0A0;
      cursor: not-allowed;
    }

    #colorPreview, #fontPreview {
      margin-top: 16px;
      border: 1px solid #ccc;
      border-radius: 4px;
      background-color: #f9f9f9;
      padding: 12px;
      font-family: monospace;
      font-size: 12px;
      white-space: pre-wrap;
      max-height: 300px;
      overflow: auto;
      display: none;
    }
  </style>
</head>
<body>
  <div class="section-title">🎨 색상 배포</div>
  <div class="onboarding-msg">
    - 색상명은 <b>영어</b>로 작성하며 <b>대문자</b>로 시작해주세요.<br>
    - 컬러는 <b>숫자</b>로 표현해주세요.<br>
    - ex) GrayScale/100, Red/200, Blue/300
  </div>
  
  <button id="Color" class="button-primary">
    색상 배포하기
  </button>
  <button id="previewColorBtn" class="button-primary">
    미리보기
  </button>

  <div id="colorPreview"></div>

  <div style="height: 20px;"></div> <!-- 공백 -->

  <div class="section-title">🖋️ 폰트 배포</div>
  <div class="onboarding-msg">
    - 스타일은 <b>영어</b>로 작성하며 <b>대문자</b>로 시작해주세요.<br>
    - 세부 종류는 스타일의 앞글자 + 1 같이 표현해주세요.<br>
    - ex) Heading/H1, SubTitle/S2, Paragraph/P3
  </div>

  <button id="deployFontsBtn" class="button-primary">
    폰트 배포하기
  </button>
  <button id="previewFontBtn" class="button-primary">
    미리보기
  </button>

  <div id="fontPreview"></div>

  <script>
    const deployColorBtn = document.getElementById('Color');
    const previewColorBtn = document.getElementById('previewColorBtn');
    const deployFontsBtn = document.getElementById('deployFontsBtn');
    const previewFontBtn = document.getElementById('previewFontBtn');
    const colorPreview = document.getElementById('colorPreview');
    const fontPreview = document.getElementById('fontPreview');
    let previewColorVisible = false;
    let previewFontVisible = false;

    Color.onclick = () => {
      Color.disabled = true;

      parent.postMessage({ pluginMessage: { type: 'deploy' } }, '*');

      setTimeout(() => {
        Color.disabled = false;
      }, 3000);
    };

    previewColorBtn.onclick = () => {
      if (previewColorVisible) {
        // Hide Color Preview
        colorPreview.style.display = 'none';
        previewColorVisible = false;
        previewColorBtn.textContent = '미리보기';
        parent.postMessage({ pluginMessage: { type: 'resize', height: 500 } }, '*');
      } else {
        // Show Color Preview with Data
        parent.postMessage({ pluginMessage: { type: 'previewColor' } }, '*');
        parent.postMessage({ pluginMessage: { type: 'resize', height: 1000 } }, '*');
      }
    };

    deployFontsBtn.onclick = () => {
      deployFontsBtn.disabled = true;
      parent.postMessage({ pluginMessage: { type: 'deployFont' } }, '*');
      setTimeout(() => {
        deployFontsBtn.disabled = false;
      }, 3000);
    };

    previewFontBtn.onclick = () => {
      if (previewFontVisible) {
        // Hide Font Preview
        fontPreview.style.display = 'none';
        previewFontBtn.textContent = '미리보기';
        previewFontVisible = false;
        parent.postMessage({ pluginMessage: { type: 'resize', height: 500 } }, '*');
      } else {
        // Show Font Preview with Data
        parent.postMessage({ pluginMessage: { type: 'previewFont' } }, '*');
        parent.postMessage({ pluginMessage: { type: 'resize', height: 1000 } }, '*');
      }
    };

    window.onmessage = (event) => {
      const msg = event.data.pluginMessage;
      if (!msg) return;

      if (msg.type === 'previewColorData' && msg.data) {
        colorPreview.textContent = msg.data;
        colorPreview.style.display = 'block';
        previewColorVisible = true;
        previewColorBtn.textContent = '미리보기 닫기';
      }

      if (msg.type === 'previewFontData' && msg.data) {
        fontPreview.textContent = msg.data;
        fontPreview.style.display = 'block';
        previewFontVisible = true;
        previewFontBtn.textContent = '미리보기 닫기';
      }
    };
  </script>
</body>
</html>